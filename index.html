<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WAHYU SHOP</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* RESET */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #ffffff;
            color: #000000;
            line-height: 1.6;
        }
        
        /* DARK MODE */
        body.dark-mode {
            background: #121212;
            color: #ffffff;
        }
        
        /* NAVBAR */
        .navbar {
            position: fixed;
            top: 0;
            width: 100%;
            background: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            border-bottom: 1px solid #ddd;
        }
        
        .dark-mode .navbar {
            background: #1a1a1a;
            border-color: #333;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 20px;
            font-weight: bold;
        }
        
        .nav-buttons {
            display: flex;
            gap: 10px;
        }
        
        .theme-btn, .notif-btn {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .notif-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: red;
            color: white;
            font-size: 12px;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* MOBILE MENU */
        .menu-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
        }
        
        .mobile-menu {
            position: fixed;
            top: 0;
            right: -300px;
            width: 280px;
            height: 100%;
            background: white;
            z-index: 2000;
            padding: 20px;
            transition: right 0.3s;
            overflow-y: auto;
        }
        
        .dark-mode .mobile-menu {
            background: #1a1a1a;
        }
        
        .mobile-menu.active {
            right: 0;
        }
        
        .mobile-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        /* MAIN CONTENT */
        .main-content {
            padding-top: 80px;
            max-width: 1200px;
            margin: 0 auto;
            padding: 100px 20px 50px;
        }
        
        .profile-img {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            margin: 30px auto;
            overflow: hidden;
            border: 3px solid black;
        }
        
        .profile-img img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        /* ANNOUNCEMENT */
        .announcement-box {
            background: black;
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 30px 0;
            border: 3px solid gold;
        }
        
        /* PRODUCTS */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .product-card {
            background: white;
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            transition: transform 0.3s;
        }
        
        .dark-mode .product-card {
            background: #2d2d2d;
            border-color: #444;
        }
        
        .product-card:hover {
            transform: translateY(-5px);
        }
        
        .order-btn {
            background: black;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
            width: 100%;
        }
        
        /* NOTIFICATIONS */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            z-index: 3000;
            display: none;
            max-width: 300px;
            border-left: 5px solid black;
        }
        
        .dark-mode .notification {
            background: #2d2d2d;
        }
        
        /* MODAL */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 3000;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            max-width: 500px;
            width: 90%;
        }
        
        .dark-mode .modal-content {
            background: #2d2d2d;
        }
        
        /* RESPONSIVE */
        @media (max-width: 768px) {
            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }
            
            .main-content {
                padding: 90px 15px 30px;
            }
        }
    </style>
</head>
<body>
    <!-- LOGIN MODAL -->
    <div id="loginModal" class="modal" style="display: flex;">
        <div class="modal-content">
            <div style="text-align: center; margin-bottom: 30px;">
                <h2><i class="fas fa-store"></i> WAHYU SHOP</h2>
                <p>Silakan login untuk melanjutkan</p>
            </div>
            
            <div style="margin-bottom: 20px;">
                <label style="display: block; margin-bottom: 8px;">Email</label>
                <input type="email" id="email" placeholder="email@example.com" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 5px;">
            </div>
            
            <div style="margin-bottom: 20px;">
                <label style="display: block; margin-bottom: 8px;">Password</label>
                <input type="password" id="password" placeholder="Password" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 5px;">
            </div>
            
            <div id="loginError" style="color: red; margin-bottom: 20px; display: none;">
                Email atau password salah
            </div>
            
            <button onclick="login()" style="width: 100%; padding: 12px; background: black; color: white; border: none; border-radius: 5px; cursor: pointer;">
                <i class="fas fa-sign-in-alt"></i> MASUK
            </button>
            
            <p style="margin-top: 20px; text-align: center; font-size: 14px; color: #666;">
                Gunakan email dan password apa saja untuk mencoba
            </p>
        </div>
    </div>
    
    <!-- NAVBAR -->
    <nav class="navbar" id="navbar" style="display: none;">
        <div class="logo">
            <i class="fas fa-store"></i>
            <span>WAHYU SHOP</span>
        </div>
        
        <div class="nav-buttons">
            <button class="theme-btn" onclick="toggleTheme()">
                <i class="fas fa-moon"></i>
            </button>
            
            <button class="notif-btn" onclick="showNotifications()" style="position: relative;">
                <i class="fas fa-bell"></i>
                <span class="notif-badge" id="notifBadge" style="display: none;">0</span>
            </button>
            
            <button class="menu-btn" onclick="toggleMobileMenu()">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </nav>
    
    <!-- MOBILE MENU -->
    <div class="mobile-menu" id="mobileMenu">
        <div class="mobile-header">
            <h3>Menu</h3>
            <button onclick="toggleMobileMenu()" style="background: none; border: none; font-size: 24px; cursor: pointer;">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div id="userProfile" style="padding: 15px; background: #f5f5f5; border-radius: 10px; margin-bottom: 20px;">
            <div style="display: flex; align-items: center; gap: 10px;">
                <div id="userAvatar" style="width: 50px; height: 50px; background: black; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 20px;">
                    U
                </div>
                <div>
                    <div id="userName" style="font-weight: bold;">User</div>
                    <div id="userEmail" style="font-size: 14px; color: #666;">user@example.com</div>
                </div>
            </div>
        </div>
        
        <div style="margin-bottom: 20px;">
            <button onclick="toggleTheme()" style="width: 100%; padding: 12px; background: #f5f5f5; border: 1px solid #ddd; border-radius: 5px; text-align: left; cursor: pointer;">
                <i class="fas fa-moon"></i> Toggle Dark Mode
            </button>
        </div>
        
        <div style="display: flex; flex-direction: column; gap: 10px;">
            <a href="#home" style="padding: 12px; background: #f5f5f5; border-radius: 5px; text-decoration: none; color: black;">
                <i class="fas fa-home"></i> Beranda
            </a>
            
            <a href="#products" style="padding: 12px; background: #f5f5f5; border-radius: 5px; text-decoration: none; color: black;">
                <i class="fas fa-shopping-cart"></i> Produk
            </a>
            
            <a href="#payment" style="padding: 12px; background: #f5f5f5; border-radius: 5px; text-decoration: none; color: black;">
                <i class="fas fa-wallet"></i> E-wallet
            </a>
            
            <!-- DEVELOPER MENU -->
            <div id="devMenu" style="display: none;">
                <button onclick="editAnnouncement()" style="width: 100%; padding: 12px; background: black; color: white; border: none; border-radius: 5px; cursor: pointer; margin-bottom: 10px;">
                    <i class="fas fa-edit"></i> Edit Pengumuman
                </button>
                
                <button onclick="addProduct()" style="width: 100%; padding: 12px; background: black; color: white; border: none; border-radius: 5px; cursor: pointer; margin-bottom: 10px;">
                    <i class="fas fa-plus"></i> Tambah Produk
                </button>
            </div>
            
            <button onclick="logout()" style="width: 100%; padding: 12px; background: #ff4444; color: white; border: none; border-radius: 5px; cursor: pointer;">
                <i class="fas fa-sign-out-alt"></i> Logout
            </button>
        </div>
    </div>
    
    <!-- MAIN CONTENT -->
    <main class="main-content" id="mainContent" style="display: none;">
        <!-- HEADER -->
        <header id="home" style="text-align: center; margin-bottom: 50px;">
            <h1 style="font-size: 36px; margin-bottom: 15px;">WEBSITE WAHYUSHOP</h1>
            <p style="color: #666; max-width: 600px; margin: 0 auto 30px;">
                Daftar Produk & Layanan dengan Harga Terjangkau
            </p>
            
            <div class="profile-img">
                <img src="https://files.catbox.moe/f41szo.jpg" alt="Profil Wahyushop">
            </div>
        </header>
        
        <!-- ANNOUNCEMENT -->
        <div class="announcement-box">
            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                <i class="fas fa-bullhorn"></i>
                <h3>PENGUMUMAN WAHYUSHOP</h3>
            </div>
            <div id="announcementText" style="padding: 15px; background: rgba(255,255,255,0.1); border-radius: 5px;">
                Selamat datang di Wahyu Shop! ðŸŽ‰
            </div>
            <div style="text-align: right; margin-top: 15px; font-size: 14px;">
                <i class="far fa-calendar"></i> <span id="announcementDate">Hari ini</span>
            </div>
        </div>
        
        <!-- PRODUCTS -->
        <section id="products" style="margin: 50px 0;">
            <h2 style="font-size: 28px; margin-bottom: 30px;">
                <i class="fas fa-shopping-cart"></i> DAFTAR PRODUK
            </h2>
            
            <div class="products-grid" id="productsContainer">
                <!-- Products will be loaded here -->
            </div>
        </section>
        
        <!-- PAYMENT -->
        <section id="payment" style="margin: 50px 0;">
            <h2 style="font-size: 28px; margin-bottom: 30px;">
                <i class="fas fa-wallet"></i> E-WALLET
            </h2>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                <!-- DANA -->
                <div class="product-card">
                    <h3><i class="fas fa-wallet"></i> DANA</h3>
                    <div style="background: #f5f5f5; padding: 15px; border-radius: 5px; margin: 15px 0;">
                        083152987363
                    </div>
                    <button onclick="copyText('083152987363')" class="order-btn">
                        <i class="fas fa-copy"></i> Salin Nomor
                    </button>
                </div>
                
                <!-- QRIS -->
                <div class="product-card">
                    <h3><i class="fas fa-qrcode"></i> QRIS</h3>
                    <p style="margin: 10px 0;">Ahmad Setio Wahyudi</p>
                    <div style="width: 200px; height: 200px; margin: 20px auto; background: white; padding: 10px; border-radius: 10px;">
                        <img src="https://files.catbox.moe/bjvotq.jpg" alt="QR Code" style="width: 100%; height: 100%; object-fit: contain;">
                    </div>
                    <button onclick="showQrModal()" class="order-btn">
                        <i class="fas fa-expand"></i> Lihat QR
                    </button>
                </div>
            </div>
        </section>
        
        <!-- FOOTER -->
        <footer style="text-align: center; padding: 30px 0; border-top: 1px solid #ddd; margin-top: 50px;">
            <p>&copy; 2024 Wahyu Shop</p>
            <p style="margin-top: 10px; color: #666;">
                Login sebagai: <span id="currentUser">User</span>
            </p>
        </footer>
    </main>
    
    <!-- NOTIFICATION POPUP -->
    <div class="notification" id="notificationPopup">
        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 10px;">
            <strong id="notifTitle">Notification</strong>
            <button onclick="closeNotif()" style="background: none; border: none; cursor: pointer;">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div id="notifMessage">Message here</div>
        <div style="font-size: 12px; color: #666; margin-top: 10px;" id="notifTime"></div>
    </div>
    
    <!-- EDIT MODAL -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <h2 style="margin-bottom: 20px;"><i class="fas fa-edit"></i> Edit Pengumuman</h2>
            <textarea id="editText" style="width: 100%; height: 200px; padding: 15px; border: 1px solid #ddd; border-radius: 5px; margin-bottom: 20px;">
                Selamat datang di Wahyu Shop! ðŸŽ‰
            </textarea>
            <div style="display: flex; gap: 10px; justify-content: flex-end;">
                <button onclick="closeEditModal()" style="padding: 10px 20px; background: #666; color: white; border: none; border-radius: 5px; cursor: pointer;">
                    Batal
                </button>
                <button onclick="saveAnnouncement()" style="padding: 10px 20px; background: black; color: white; border: none; border-radius: 5px; cursor: pointer;">
                    Simpan
                </button>
            </div>
        </div>
    </div>
    
    <!-- ADD PRODUCT MODAL -->
    <div id="addProductModal" class="modal">
        <div class="modal-content">
            <h2 style="margin-bottom: 20px;"><i class="fas fa-plus"></i> Tambah Produk</h2>
            <input type="text" id="newProductName" placeholder="Nama Produk" style="width: 100%; padding: 12px; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 5px;">
            <input type="text" id="newProductPrice" placeholder="Harga (Rp)" style="width: 100%; padding: 12px; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 5px;">
            <div style="display: flex; gap: 10px; justify-content: flex-end;">
                <button onclick="closeAddModal()" style="padding: 10px 20px; background: #666; color: white; border: none; border-radius: 5px; cursor: pointer;">
                    Batal
                </button>
                <button onclick="saveProduct()" style="padding: 10px 20px; background: black; color: white; border: none; border-radius: 5px; cursor: pointer;">
                    Tambah
                </button>
            </div>
        </div>
    </div>
    
    <!-- QR MODAL -->
    <div id="qrModal" class="modal">
        <div class="modal-content">
            <h2 style="margin-bottom: 20px;"><i class="fas fa-qrcode"></i> QRIS</h2>
            <div style="text-align: center;">
                <div style="width: 300px; height: 300px; margin: 0 auto; background: white; padding: 20px; border-radius: 10px;">
                    <img src="https://files.catbox.moe/bjvotq.jpg" alt="QR Code" style="width: 100%; height: 100%; object-fit: contain;">
                </div>
                <p style="margin: 20px 0; font-weight: bold;">Ahmad Setio Wahyudi</p>
                <p>083152987363</p>
            </div>
            <button onclick="closeQrModal()" style="width: 100%; padding: 12px; background: black; color: white; border: none; border-radius: 5px; cursor: pointer; margin-top: 20px;">
                Tutup
            </button>
        </div>
    </div>
    
    <script>
        // ==================== CONFIG ====================
        const DEVELOPER_EMAIL = "admin@wahyushop.com";
        const DEVELOPER_PASS = "admin123";
        
        const DEFAULT_PRODUCTS = [
            { id: 1, name: "MURBUG", price: "Rp 3.000 - 10.000", desc: "Topup game murah" },
            { id: 2, name: "MURSUN", price: "Rp 5.000", desc: "Voucher game" },
            { id: 3, name: "MURPP", price: "Rp 12.000", desc: "PowerPoint murah" },
            { id: 4, name: "JASA WEBSITE", price: "Rp 25.000", desc: "Website payment" },
            { id: 5, name: "JASA BOT", price: "Rp 2.000", desc: "Bot Telegram" },
            { id: 6, name: "LAINNYA", price: "Hubungi Admin", desc: "Tanya produk lainnya" }
        ];
        
        // ==================== INITIALIZE ====================
        function init() {
            // Initialize localStorage
            if (!localStorage.getItem('wahyu_users')) {
                localStorage.setItem('wahyu_users', JSON.stringify([]));
            }
            if (!localStorage.getItem('wahyu_products')) {
                localStorage.setItem('wahyu_products', JSON.stringify(DEFAULT_PRODUCTS));
            }
            if (!localStorage.getItem('wahyu_announcement')) {
                localStorage.setItem('wahyu_announcement', "Selamat datang di Wahyu Shop! ðŸŽ‰\\n\\nðŸ“¢ PROMO KHUSUS:\\nâ€¢ Diskon 10% pembelian pertama\\nâ€¢ Bonus saldo untuk topup > 50k\\n\\nðŸ“± KONTAK:\\nâ€¢ Telegram: @WahyuShop9\\nâ€¢ WA: 083152987363");
            }
            if (!localStorage.getItem('wahyu_notifications')) {
                localStorage.setItem('wahyu_notifications', JSON.stringify([]));
            }
            
            // Load data
            loadAnnouncement();
            loadProducts();
        }
        
        // ==================== THEME SYSTEM ====================
        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            localStorage.setItem('theme', document.body.classList.contains('dark-mode') ? 'dark' : 'light');
        }
        
        // ==================== NOTIFICATION SYSTEM ====================
        function showNotification(title, message) {
            const notif = {
                id: Date.now(),
                title: title,
                message: message,
                time: new Date().toLocaleString(),
                read: false
            };
            
            // Save to localStorage
            let notifications = JSON.parse(localStorage.getItem('wahyu_notifications'));
            notifications.push(notif);
            localStorage.setItem('wahyu_notifications', JSON.stringify(notifications));
            
            // Show popup
            document.getElementById('notifTitle').textContent = title;
            document.getElementById('notifMessage').textContent = message;
            document.getElementById('notifTime').textContent = notif.time;
            document.getElementById('notificationPopup').style.display = 'block';
            
            // Update badge
            updateNotifBadge();
            
            // Auto hide after 5 seconds
            setTimeout(() => {
                document.getElementById('notificationPopup').style.display = 'none';
            }, 5000);
        }
        
        function closeNotif() {
            document.getElementById('notificationPopup').style.display = 'none';
        }
        
        function updateNotifBadge() {
            const notifications = JSON.parse(localStorage.getItem('wahyu_notifications'));
            const unread = notifications.filter(n => !n.read).length;
            const badge = document.getElementById('notifBadge');
            
            if (unread > 0) {
                badge.textContent = unread;
                badge.style.display = 'flex';
            } else {
                badge.style.display = 'none';
            }
        }
        
        function showNotifications() {
            const notifications = JSON.parse(localStorage.getItem('wahyu_notifications'));
            let alertText = "=== NOTIFIKASI ===\\n";
            
            notifications.slice(-5).forEach(n => {
                alertText += `ðŸ“Œ ${n.title}\\n${n.message}\\n(${n.time})\\n\\n`;
            });
            
            alert(alertText);
            
            // Mark as read
            notifications.forEach(n => n.read = true);
            localStorage.setItem('wahyu_notifications', JSON.stringify(notifications));
            updateNotifBadge();
        }
        
        // ==================== LOGIN SYSTEM ====================
        function login() {
            const email = document.getElementById('email').value.trim();
            const password = document.getElementById('password').value.trim();
            
            if (!email || !password) {
                document.getElementById('loginError').textContent = "Email dan password harus diisi";
                document.getElementById('loginError').style.display = 'block';
                return;
            }
            
            // Check if developer
            const isDeveloper = (email === DEVELOPER_EMAIL && password === DEVELOPER_PASS);
            
            // Save user data
            let users = JSON.parse(localStorage.getItem('wahyu_users'));
            const userExists = users.find(u => u.email === email);
            
            if (!userExists) {
                users.push({
                    email: email,
                    username: email.split('@')[0],
                    isDeveloper: isDeveloper,
                    joinDate: new Date().toISOString(),
                    lastLogin: new Date().toISOString()
                });
                localStorage.setItem('wahyu_users', JSON.stringify(users));
            }
            
            // Save current session
            localStorage.setItem('current_user', email);
            localStorage.setItem('is_developer', isDeveloper);
            
            // Show success
            document.getElementById('loginModal').style.display = 'none';
            document.getElementById('navbar').style.display = 'flex';
            document.getElementById('mainContent').style.display = 'block';
            
            // Update UI
            updateUserUI(email, isDeveloper);
            
            // Show welcome notification
            if (isDeveloper) {
                showNotification("Selamat Datang Developer!", "Anda dapat mengedit pengumuman dan menambah produk");
            } else {
                showNotification("Selamat Datang!", "Selamat berbelanja di Wahyu Shop!");
            }
        }
        
        function updateUserUI(email, isDeveloper) {
            const username = email.split('@')[0];
            const firstLetter = username.charAt(0).toUpperCase();
            
            // Update navbar
            document.getElementById('currentUser').textContent = username + (isDeveloper ? " (Developer)" : "");
            
            // Update mobile menu
            document.getElementById('userName').textContent = username;
            document.getElementById('userEmail').textContent = email;
            document.getElementById('userAvatar').textContent = firstLetter;
            
            // Show/hide developer menu
            if (isDeveloper) {
                document.getElementById('devMenu').style.display = 'block';
            }
        }
        
        function logout() {
            if (confirm("Yakin ingin logout?")) {
                localStorage.removeItem('current_user');
                localStorage.removeItem('is_developer');
                location.reload();
            }
        }
        
        // ==================== PRODUCT SYSTEM ====================
        function loadProducts() {
            const products = JSON.parse(localStorage.getItem('wahyu_products'));
            const container = document.getElementById('productsContainer');
            const isDev = localStorage.getItem('is_developer') === 'true';
            
            let html = '';
            
            products.forEach(product => {
                html += `
                    <div class="product-card">
                        ${isDev ? `<button onclick="deleteProduct(${product.id})" style="position: absolute; right: 10px; top: 10px; background: red; color: white; border: none; width: 30px; height: 30px; border-radius: 50%; cursor: pointer;">Ã—</button>` : ''}
                        <h3 style="margin-bottom: 10px;">${product.name}</h3>
                        <p style="color: #666; margin-bottom: 10px;">${product.desc}</p>
                        <div style="font-weight: bold; font-size: 18px; margin: 15px 0;">${product.price}</div>
                        <button onclick="orderProduct('${product.name}')" class="order-btn">
                            <i class="fab fa-telegram"></i> Pesan via Telegram
                        </button>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }
        
        function orderProduct(productName) {
            const userEmail = localStorage.getItem('current_user') || "User";
            const username = userEmail.split('@')[0];
            
            // Show notification to developer
            if (localStorage.getItem('is_developer') !== 'true') {
                showNotification("Pembelian Produk", `${username} membeli: ${productName}`);
            }
            
            // Open Telegram
            const message = `Halo Wahyushop, saya ingin membeli ${productName}`;
            window.open(`https://t.me/WahyuShop9?text=${encodeURIComponent(message)}`, '_blank');
        }
        
        function addProduct() {
            document.getElementById('addProductModal').style.display = 'flex';
            document.getElementById('mobileMenu').classList.remove('active');
        }
        
        function closeAddModal() {
            document.getElementById('addProductModal').style.display = 'none';
        }
        
        function saveProduct() {
            const name = document.getElementById('newProductName').value.trim();
            const price = document.getElementById('newProductPrice').value.trim();
            
            if (!name || !price) {
                alert("Nama dan harga harus diisi!");
                return;
            }
            
            const products = JSON.parse(localStorage.getItem('wahyu_products'));
            const newProduct = {
                id: Date.now(),
                name: name,
                price: price,
                desc: "Produk baru"
            };
            
            products.push(newProduct);
            localStorage.setItem('wahyu_products', JSON.stringify(products));
            
            // Reload products
            loadProducts();
            
            // Show notification
            showNotification("Produk Baru!", `Produk "${name}" telah ditambahkan`);
            
            // Close modal
            closeAddModal();
        }
        
        function deleteProduct(id) {
            if (confirm("Hapus produk ini?")) {
                let products = JSON.parse(localStorage.getItem('wahyu_products'));
                products = products.filter(p => p.id !== id);
                localStorage.setItem('wahyu_products', JSON.stringify(products));
                loadProducts();
            }
        }
        
        // ==================== ANNOUNCEMENT SYSTEM ====================
        function loadAnnouncement() {
            const announcement = localStorage.getItem('wahyu_announcement');
            document.getElementById('announcementText').innerHTML = announcement.replace(/\\n/g, '<br>');
            document.getElementById('announcementDate').textContent = new Date().toLocaleDateString('id-ID');
            document.getElementById('editText').value = announcement.replace(/\\n/g, '\n');
        }
        
        function editAnnouncement() {
            if (localStorage.getItem('is_developer') === 'true') {
                document.getElementById('editModal').style.display = 'flex';
                document.getElementById('mobileMenu').classList.remove('active');
            } else {
                alert("Hanya developer yang dapat mengedit pengumuman!");
            }
        }
        
        function closeEditModal() {
            document.getElementById('editModal').style.display = 'none';
        }
        
        function saveAnnouncement() {
            const text = document.getElementById('editText').value;
            localStorage.setItem('wahyu_announcement', text);
            loadAnnouncement();
            closeEditModal();
            
            // Show notification
            showNotification("Pengumuman Diperbarui", "Developer telah memperbarui pengumuman");
        }
        
        // ==================== UTILITIES ====================
        function toggleMobileMenu() {
            document.getElementById('mobileMenu').classList.toggle('active');
        }
        
        function copyText(text) {
            navigator.clipboard.writeText(text);
            alert("Tersalin: " + text);
        }
        
        function showQrModal() {
            document.getElementById('qrModal').style.display = 'flex';
        }
        
        function closeQrModal() {
            document.getElementById('qrModal').style.display = 'none';
        }
        
        // ==================== INIT ON LOAD ====================
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize data
            init();
            
            // Check if user is already logged in
            const currentUser = localStorage.getItem('current_user');
            if (currentUser) {
                const isDev = localStorage.getItem('is_developer') === 'true';
                document.getElementById('loginModal').style.display = 'none';
                document.getElementById('navbar').style.display = 'flex';
                document.getElementById('mainContent').style.display = 'block';
                updateUserUI(currentUser, isDev);
                updateNotifBadge();
            }
            
            // Load theme
            if (localStorage.getItem('theme') === 'dark') {
                document.body.classList.add('dark-mode');
            }
        });
    </script>
</body>
</html>